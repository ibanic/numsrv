!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=21)}([function(e,t){e.exports=React},function(e,t,n){e.exports=n(9)()},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i,o,s,a){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,s,a],u=0;(c=new Error(t.replace(/%s/g,(function(){return l[u++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(s=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),o=r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}));return[n].concat(o).concat([i]).join("\n")}var s;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var s=e[i];"number"==typeof s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(e,t,n){var r,i,o={},s=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),a=function(e,t){return t?t.querySelector(e):document.querySelector(e)},c=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var r=a.call(this,e,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),l=null,u=0,h=[],p=n(13);function d(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=o[r.id];if(i){i.refs++;for(var s=0;s<i.parts.length;s++)i.parts[s](r.parts[s]);for(;s<r.parts.length;s++)i.parts.push(b(r.parts[s],t))}else{var a=[];for(s=0;s<r.parts.length;s++)a.push(b(r.parts[s],t));o[r.id]={id:r.id,refs:1,parts:a}}}}function m(e,t){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],s=t.base?o[0]+t.base:o[0],a={css:o[1],media:o[2],sourceMap:o[3]};r[s]?r[s].parts.push(a):n.push(r[s]={id:s,parts:[a]})}return n}function f(e,t){var n=c(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=h[h.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),h.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=c(e.insertAt.before,n);n.insertBefore(t,i)}}function y(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=h.indexOf(e);t>=0&&h.splice(t,1)}function v(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var r=function(){0;return n.nc}();r&&(e.attrs.nonce=r)}return g(t,e.attrs),f(e,t),t}function g(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function b(e,t){var n,r,i,o;if(t.transform&&e.css){if(!(o="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=o}if(t.singleton){var s=u++;n=l||(l=v(t)),r=x.bind(null,n,s,!1),i=x.bind(null,n,s,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",g(t,e.attrs),f(e,t),t}(t),r=C.bind(null,n,t),i=function(){y(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(t),r=S.bind(null,n),i=function(){y(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=s()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=m(e,t);return d(n,t),function(e){for(var r=[],i=0;i<n.length;i++){var s=n[i];(a=o[s.id]).refs--,r.push(a)}e&&d(m(e,t),t);for(i=0;i<r.length;i++){var a;if(0===(a=r[i]).refs){for(var c=0;c<a.parts.length;c++)a.parts[c]();delete o[a.id]}}}};var w,E=(w=[],function(e,t){return w[e]=t,w.filter(Boolean).join("\n")});function x(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=E(t,i);else{var o=document.createTextNode(i),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function S(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function C(e,t,n){var r=n.css,i=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(r=p(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var s=new Blob([r],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}},,function(e,t){e.exports=ReactDOM},function(e,t,n){var r=n(20);e.exports=d,e.exports.parse=o,e.exports.compile=function(e,t){return a(o(e,t),t)},e.exports.tokensToFunction=a,e.exports.tokensToRegExp=p;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(e,t){for(var n,r=[],o=0,s=0,a="",u=t&&t.delimiter||"/";null!=(n=i.exec(e));){var h=n[0],p=n[1],d=n.index;if(a+=e.slice(s,d),s=d+h.length,p)a+=p[1];else{var m=e[s],f=n[2],y=n[3],v=n[4],g=n[5],b=n[6],w=n[7];a&&(r.push(a),a="");var E=null!=f&&null!=m&&m!==f,x="+"===b||"*"===b,S="?"===b||"*"===b,C=n[2]||u,k=v||g;r.push({name:y||o++,prefix:f||"",delimiter:C,optional:S,repeat:x,partial:E,asterisk:!!w,pattern:k?l(k):w?".*":"[^"+c(C)+"]+?"})}}return s<e.length&&(a+=e.substr(s)),a&&r.push(a),r}function s(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function a(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"==typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",h(t)));return function(t,i){for(var o="",a=t||{},c=(i||{}).pretty?s:encodeURIComponent,l=0;l<e.length;l++){var u=e[l];if("string"!=typeof u){var h,p=a[u.name];if(null==p){if(u.optional){u.partial&&(o+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(r(p)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(p)+"`");if(0===p.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var d=0;d<p.length;d++){if(h=c(p[d]),!n[l].test(h))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(h)+"`");o+=(0===d?u.prefix:u.delimiter)+h}}else{if(h=u.asterisk?encodeURI(p).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):c(p),!n[l].test(h))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+h+'"');o+=u.prefix+h}}else o+=u}return o}}function c(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function l(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function u(e,t){return e.keys=t,e}function h(e){return e&&e.sensitive?"":"i"}function p(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,o=!1!==n.end,s="",a=0;a<e.length;a++){var l=e[a];if("string"==typeof l)s+=c(l);else{var p=c(l.prefix),d="(?:"+l.pattern+")";t.push(l),l.repeat&&(d+="(?:"+p+d+")*"),s+=d=l.optional?l.partial?p+"("+d+")?":"(?:"+p+"("+d+"))?":p+"("+d+")"}}var m=c(n.delimiter||"/"),f=s.slice(-m.length)===m;return i||(s=(f?s.slice(0,-m.length):s)+"(?:"+m+"(?=$))?"),s+=o?"$":i&&f?"":"(?="+m+"|$)",u(new RegExp("^"+s,h(n)),t)}function d(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return u(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(d(e[i],t,n).source);return u(new RegExp("(?:"+r.join("|")+")",h(n)),t)}(e,t,n):function(e,t,n){return p(o(e,n),t,n)}(e,t,n)}},function(e,t,n){"use strict";var r=n(10);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){var r=n(12);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(5)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(4)(!1)).push([e.i,".noselect {\n  -webkit-touch-callout: none; /* iOS Safari */\n    -webkit-user-select: none; /* Safari */\n     -khtml-user-select: none; /* Konqueror HTML */\n       -moz-user-select: none; /* Firefox */\n        -ms-user-select: none; /* Internet Explorer/Edge */\n            user-select: none; /* Non-prefixed version, currently\n                                  supported by Chrome and Opera */\n}\n",""])},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var i,o=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")}))}},function(e,t,n){var r=n(15);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(5)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(4)(!1)).push([e.i,".dim-horizontal { display: flex; }\n\n.dim-horizontal .dim-item { width: 8rem; }\n.dim-item-container { display: flex; }\n.dim-horizontal .dim-item-container { justify-content: flex-end; }\n\n.dim-item-name { border: 1px solid transparent; flex-grow: 1; overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap; }\n.selectable .dim-item-name:hover { border-color: #666 !important; }\n\n\n.dim-horizontal .dim-item-name { flex-grow: 0; }",""])},function(e,t,n){var r=n(17);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(5)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(4)(!1)).push([e.i,".search-container { position: relative; }\n.search-container > .input-group { z-index: 101; }\n.search-results { position: absolute; top: 2.25rem; background-color: white; border: 1px solid #ccc; left: 0; right: 0; max-height: 10rem; box-shadow: 3px 4px 20px 0px rgba(0,0,0,0.28); border-radius: 3px; padding: 0; z-index: 100; overflow-y: auto; }\n.search-results > * { display: block; border-bottom: 1px solid #ccc; padding: .2rem .5rem; }\n.search-results > *:last-child { border-bottom: none; }",""])},function(e,t,n){var r=n(19);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(5)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(4)(!1)).push([e.i,".cube-dims { display: flex; background-color: rgba(0,0,0,0.03); border-radius: 0.2rem; padding: 0.3rem 0.6rem; margin-bottom: 1rem; }\n.cube-dims > div { width: 8rem; margin-right: 0.5rem; }\n\n.cube td { vertical-align: top; }\n\n.cube-cell td { width: 8rem; overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap; text-align: right; }\n\n\n.cube-cell td::selection{\n    background-color:transparent !important;\n    /*color:#fff !important;*/\n}",""])},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),o=n(7),s=n.n(o),a=n(2),c=n.n(a),l=n(1),u=n.n(l);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e){return"/"===e.charAt(0)}function d(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var m=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],o=e&&p(e),s=t&&p(t),a=o||s;if(e&&p(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var c=i[i.length-1];n="."===c||".."===c||""===c}else n=!1;for(var l=0,u=i.length;u>=0;u--){var h=i[u];"."===h?d(i,u):".."===h?(d(i,u),l++):l&&(d(i,u),l--)}if(!a)for(;l--;l)i.unshift("..");!a||""===i[0]||i[0]&&p(i[0])||i.unshift("");var m=i.join("/");return n&&"/"!==m.substr(-1)&&(m+="/"),m};var f=function(e,t){if(!e)throw new Error("Invariant failed")};function y(e){return"/"===e.charAt(0)?e:"/"+e}function v(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function g(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function b(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function w(e,t,n,r){var i;"string"==typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e)).state=t:(void 0===(i=h({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=m(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function E(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var o="function"==typeof e?e(t,n):e;"string"==typeof o?"function"==typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var x=!("undefined"==typeof window||!window.document||!window.document.createElement);function S(e,t){t(window.confirm(e))}function C(){try{return window.history.state||{}}catch(e){return{}}}function k(e){void 0===e&&(e={}),x||f(!1);var t,n=window.history,r=(-1===(t=window.navigator.userAgent).indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,i=!(-1===window.navigator.userAgent.indexOf("Trident")),o=e,s=o.forceRefresh,a=void 0!==s&&s,c=o.getUserConfirmation,l=void 0===c?S:c,u=o.keyLength,p=void 0===u?6:u,d=e.basename?g(y(e.basename)):"";function m(e){var t=e||{},n=t.key,r=t.state,i=window.location,o=i.pathname+i.search+i.hash;return d&&(o=v(o,d)),w(o,r,n)}function k(){return Math.random().toString(36).substr(2,p)}var I=E();function O(e){h(M,e),M.length=n.length,I.notifyListeners(M.location,M.action)}function R(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||X(m(e.state))}function j(){X(m(C()))}var Y=!1;function X(e){if(Y)Y=!1,O();else{I.confirmTransitionTo(e,"POP",l,(function(t){t?O({action:"POP",location:e}):function(e){var t=M.location,n=T.indexOf(t.key);-1===n&&(n=0);var r=T.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(Y=!0,N(i))}(e)}))}}var P=m(C()),T=[P.key];function L(e){return d+b(e)}function N(e){n.go(e)}var U=0;function A(e){1===(U+=e)&&1===e?(window.addEventListener("popstate",R),i&&window.addEventListener("hashchange",j)):0===U&&(window.removeEventListener("popstate",R),i&&window.removeEventListener("hashchange",j))}var D=!1;var M={length:n.length,action:"POP",location:P,createHref:L,push:function(e,t){var i=w(e,t,k(),M.location);I.confirmTransitionTo(i,"PUSH",l,(function(e){if(e){var t=L(i),o=i.key,s=i.state;if(r)if(n.pushState({key:o,state:s},null,t),a)window.location.href=t;else{var c=T.indexOf(M.location.key),l=T.slice(0,c+1);l.push(i.key),T=l,O({action:"PUSH",location:i})}else window.location.href=t}}))},replace:function(e,t){var i=w(e,t,k(),M.location);I.confirmTransitionTo(i,"REPLACE",l,(function(e){if(e){var t=L(i),o=i.key,s=i.state;if(r)if(n.replaceState({key:o,state:s},null,t),a)window.location.replace(t);else{var c=T.indexOf(M.location.key);-1!==c&&(T[c]=i.key),O({action:"REPLACE",location:i})}else window.location.replace(t)}}))},go:N,goBack:function(){N(-1)},goForward:function(){N(1)},block:function(e){void 0===e&&(e=!1);var t=I.setPrompt(e);return D||(A(1),D=!0),function(){return D&&(D=!1,A(-1)),t()}},listen:function(e){var t=I.appendListener(e);return A(1),function(){A(-1),t()}}};return M}var I=n(3),O=n.n(I),R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var X=function(e){function t(){var n,r;j(this,t);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=r=Y(this,e.call.apply(e,[this].concat(o))),r.state={match:r.computeMatch(r.props.history.location.pathname)},Y(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:R({},this.context.router,{history:this.props.history,route:{location:this.props.history.location,match:this.state.match}})}},t.prototype.computeMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}},t.prototype.componentWillMount=function(){var e=this,t=this.props,n=t.children,r=t.history;O()(null==n||1===i.a.Children.count(n),"A <Router> may have only one child element"),this.unlisten=r.listen((function(){e.setState({match:e.computeMatch(r.location.pathname)})}))},t.prototype.componentWillReceiveProps=function(e){c()(this.props.history===e.history,"You cannot change <Router history>")},t.prototype.componentWillUnmount=function(){this.unlisten()},t.prototype.render=function(){var e=this.props.children;return e?i.a.Children.only(e):null},t}(i.a.Component);X.propTypes={history:u.a.object.isRequired,children:u.a.node},X.contextTypes={router:u.a.object},X.childContextTypes={router:u.a.object.isRequired};var P=X;function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var N=function(e){function t(){var n,r;T(this,t);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=r=L(this,e.call.apply(e,[this].concat(o))),r.history=k(r.props),L(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){c()(!this.props.history,"<BrowserRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { BrowserRouter as Router }`.")},t.prototype.render=function(){return i.a.createElement(P,{history:this.history,children:this.props.children})},t}(i.a.Component);N.propTypes={basename:u.a.string,forceRefresh:u.a.bool,getUserConfirmation:u.a.func,keyLength:u.a.number,children:u.a.node};var U=N,A=n(8),D=n.n(A),M={},_=0,q=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=M[n]||(M[n]={});if(r[e])return r[e];var i=[],o={re:D()(e,i,t),keys:i};return _<1e4&&(r[e]=o,_++),o},K=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];"string"==typeof t&&(t={path:t});var r=t,i=r.path,o=r.exact,s=void 0!==o&&o,a=r.strict,c=void 0!==a&&a,l=r.sensitive,u=void 0!==l&&l;if(null==i)return n;var h=q(i,{end:s,strict:c,sensitive:u}),p=h.re,d=h.keys,m=p.exec(e);if(!m)return null;var f=m[0],y=m.slice(1),v=e===f;return s&&!v?null:{path:i,url:"/"===i&&""===f?"/":f,isExact:v,params:d.reduce((function(e,t,n){return e[t.name]=y[n],e}),{})}};function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var W=function(e){function t(){return F(this,t),z(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){O()(this.context.router,"You should not use <Switch> outside a <Router>")},t.prototype.componentWillReceiveProps=function(e){c()(!(e.location&&!this.props.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),c()(!(!e.location&&this.props.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')},t.prototype.render=function(){var e=this.context.router.route,t=this.props.children,n=this.props.location||e.location,r=void 0,o=void 0;return i.a.Children.forEach(t,(function(t){if(null==r&&i.a.isValidElement(t)){var s=t.props,a=s.path,c=s.exact,l=s.strict,u=s.sensitive,h=s.from,p=a||h;o=t,r=K(n.pathname,{path:p,exact:c,strict:l,sensitive:u},e.match)}})),r?i.a.cloneElement(o,{location:n,computedMatch:r}):null},t}(i.a.Component);W.contextTypes={router:u.a.shape({route:u.a.object.isRequired}).isRequired},W.propTypes={children:u.a.node,location:u.a.object};var B=W,V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var J=function(e){return 0===i.a.Children.count(e)},Q=function(e){function t(){var n,r;H(this,t);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=r=$(this,e.call.apply(e,[this].concat(o))),r.state={match:r.computeMatch(r.props,r.context.router)},$(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:V({},this.context.router,{route:{location:this.props.location||this.context.router.route.location,match:this.state.match}})}},t.prototype.computeMatch=function(e,t){var n=e.computedMatch,r=e.location,i=e.path,o=e.strict,s=e.exact,a=e.sensitive;if(n)return n;O()(t,"You should not use <Route> or withRouter() outside a <Router>");var c=t.route,l=(r||c.location).pathname;return K(l,{path:i,strict:o,exact:s,sensitive:a},c.match)},t.prototype.componentWillMount=function(){c()(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored"),c()(!(this.props.component&&this.props.children&&!J(this.props.children)),"You should not use <Route component> and <Route children> in the same route; <Route children> will be ignored"),c()(!(this.props.render&&this.props.children&&!J(this.props.children)),"You should not use <Route render> and <Route children> in the same route; <Route children> will be ignored")},t.prototype.componentWillReceiveProps=function(e,t){c()(!(e.location&&!this.props.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),c()(!(!e.location&&this.props.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.'),this.setState({match:this.computeMatch(e,t.router)})},t.prototype.render=function(){var e=this.state.match,t=this.props,n=t.children,r=t.component,o=t.render,s=this.context.router,a=s.history,c=s.route,l=s.staticContext,u={match:e,location:this.props.location||c.location,history:a,staticContext:l};return r?e?i.a.createElement(r,u):null:o?e?o(u):null:"function"==typeof n?n(u):n&&!J(n)?i.a.Children.only(n):null},t}(i.a.Component);Q.propTypes={computedMatch:u.a.object,path:u.a.string,exact:u.a.bool,strict:u.a.bool,sensitive:u.a.bool,component:u.a.func,render:u.a.func,children:u.a.oneOfType([u.a.func,u.a.node]),location:u.a.object},Q.contextTypes={router:u.a.shape({history:u.a.object.isRequired,route:u.a.object.isRequired,staticContext:u.a.object})},Q.childContextTypes={router:u.a.object.isRequired};var G=Q,Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var ne=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},re=function(e){function t(){var n,r;ee(this,t);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=r=te(this,e.call.apply(e,[this].concat(o))),r.handleClick=function(e){if(r.props.onClick&&r.props.onClick(e),!e.defaultPrevented&&0===e.button&&!r.props.target&&!ne(e)){e.preventDefault();var t=r.context.router.history,n=r.props,i=n.replace,o=n.to;i?t.replace(o):t.push(o)}},te(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=(e.replace,e.to),n=e.innerRef,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["replace","to","innerRef"]);O()(this.context.router,"You should not use <Link> outside a <Router>"),O()(void 0!==t,'You must specify the "to" property');var o=this.context.router.history,s="string"==typeof t?w(t,null,null,o.location):t,a=o.createHref(s);return i.a.createElement("a",Z({},r,{onClick:this.handleClick,href:a,ref:n}))},t}(i.a.Component);re.propTypes={onClick:u.a.func,target:u.a.string,replace:u.a.bool,to:u.a.oneOfType([u.a.string,u.a.object]).isRequired,innerRef:u.a.oneOfType([u.a.string,u.a.func])},re.defaultProps={replace:!1},re.contextTypes={router:u.a.shape({history:u.a.shape({push:u.a.func.isRequired,replace:u.a.func.isRequired,createHref:u.a.func.isRequired}).isRequired}).isRequired};var ie=re;let oe,se,ae;const ce=window.navigator.userLanguage||window.navigator.language,le=localStorage.getItem("intUnits");se=!0,"0"===le&&(se=!1),null==le&&("en-US"!=ce&&"en-us"!=ce||(se=!1));const ue=localStorage.getItem("lang");function he(){return se}function pe(){return oe}function de(e){const t=pe();return t in e?e[t]:"en"in e?e.en:""}function me(e){ae=e}function fe(e){const t=pe();return t in e.nameShort?e.nameShort[t]:"en"in e.nameShort?e.nameShort.en:e.key}function ye(e){const t=pe();return t in e.nameLong?e.nameLong[t]:fe(e)}oe="en",oe=ue||ce.split("-")[0];class ve extends r.Component{constructor(e){super(e),this.state={cubes:[],dims:[]}}async componentDidMount(){console.log(API_URL+"/api/cubes"); const e=await fetch(API_URL+"/api/cubes"); console.log(e); const t=await e.json();this.setState({cubes:t});const n=await fetch(API_URL+"/api/dims"),r=await n.json();this.setState({dims:r})}render(){return i.a.createElement("div",{className:"container"},i.a.createElement("h1",null,"NumSrv"),i.a.createElement("p",{className:"lead"},"Predictable datasets with every data you may need."),i.a.createElement("div",{className:"list-group"},this.state.cubes.map(e=>i.a.createElement(ie,{key:e.key,to:"/cubes/"+e.key,className:"list-group-item list-group-item-action"},de(e.name)))),i.a.createElement("h1",null,"Dims"),i.a.createElement("div",{className:"list-group"},this.state.dims.map(e=>i.a.createElement(ie,{key:e.key,to:"/dims/"+e.key,className:"list-group-item list-group-item-action"},de(e.name)))),i.a.createElement("p",{className:"text-muted text-center text-small mt-3"},i.a.createElement("a",{href:"mailto:ignacb@gmail.com"},"ignacb@gmail.com")))}}n(11),n(14),n(16);const ge=["dimKey","multipleQueries"];class be extends r.Component{constructor(e){super(e),this.state={query:"",results:[],status:0},this.controller=null,this.timer=null,this.handleTimeCB=this.handleTimeCB.bind(this)}componentDidUpdate(e){if(""==this.state.query)return;ge.find(t=>this.props[t]!=e[t]&&(!this.props[t]||!e[t]||"object"!=typeof this.props[t]||"object"!=typeof e[t]||JSON.stringify(this.props[t])!=JSON.stringify(e[t])))&&this.setState({query:"",results:[],status:0})}async set(e,t,n){return new Promise((r,i)=>{this.setState({query:e,results:t,status:n},()=>{this.props.callback&&this.props.callback(e,t),r()})})}async handle(e){this.controller&&(this.controller.abort(),this.controller=null),this.timer&&(clearTimeout(this.timer),this.timer=null),await this.set(e,[],1),""!=e&&(this.timer=setTimeout(this.handleTimeCB,100))}async handleTimeCB(){const e=this.state.query;this.controller=new AbortController;const t=this.controller.signal,n={query:e,lang:pe()};let r,i;this.props.multipleQueries&&-1!=e.indexOf(",")&&(n.multipleQueries=!0);try{if(r=await fetch(API_URL+"/api/dims/"+this.props.dimKey+"/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),signal:t}),!r.ok)return Promise.reject();i=await r.json()}catch(t){return console.log("aborted by user or error",t),void(this.controller&&this.set(e,[],2))}this.controller&&i&&this.set(e,i,0)}renderSearchDimItem(e){return i.a.createElement("a",{href:"#",key:e.uniqueId},i.a.createElement("span",{className:"d-block"},e.itemName,e.itemName!=e.itemKey&&i.a.createElement("span",{className:"ml-3 text-muted"},e.itemKey)),i.a.createElement("small",{className:"d-block text-muted"},"dim: ",e.dimKey," TODO trans name"))}render(){return i.a.createElement("div",{className:"search-container"},i.a.createElement("div",{className:"input-group mb-3 "+(this.props.size&&"input-group-"+this.props.size)},!this.props.hideIcon&&i.a.createElement("div",{className:"input-group-prepend"},i.a.createElement("span",{className:"input-group-text"},"ðŸ” ")),i.a.createElement("input",{type:"search",className:"form-control",placeholder:"Search ...",value:this.state.query,onChange:e=>this.handle(e.target.value)})),this.state.query.length>0&&!this.props.hideResults&&2==this.state.status&&i.a.createElement("p",null,"Error"),this.state.query.length>0&&!this.props.hideResults&&1==this.state.status&&i.a.createElement("p",null,"Loading ..."),this.state.query.length>0&&!this.props.hideResults&&0==this.state.status&&i.a.createElement("div",{className:"search-results"},this.state.results.length>0?this.state.results.map((e,t)=>{if("dimItem"==e.type)return this.renderSearchDimItem(e)}):i.a.createElement("span",null,"No results")))}}const we={ac:"ðŸ‡¦ðŸ‡¨",ad:"ðŸ‡¦ðŸ‡©",ae:"ðŸ‡¦ðŸ‡ª",af:"ðŸ‡¦ðŸ‡«",ag:"ðŸ‡¦ðŸ‡¬",ai:"ðŸ‡¦ðŸ‡®",al:"ðŸ‡¦ðŸ‡±",am:"ðŸ‡¦ðŸ‡²",ao:"ðŸ‡¦ðŸ‡´",aq:"ðŸ‡¦ðŸ‡¶",ar:"ðŸ‡¦ðŸ‡·",as:"ðŸ‡¦ðŸ‡¸",at:"ðŸ‡¦ðŸ‡¹",au:"ðŸ‡¦ðŸ‡º",aw:"ðŸ‡¦ðŸ‡¼",ax:"ðŸ‡¦ðŸ‡½",az:"ðŸ‡¦ðŸ‡¿",ba:"ðŸ‡§ðŸ‡¦",bb:"ðŸ‡§ðŸ‡§",bd:"ðŸ‡§ðŸ‡©",be:"ðŸ‡§ðŸ‡ª",bf:"ðŸ‡§ðŸ‡«",bg:"ðŸ‡§ðŸ‡¬",bh:"ðŸ‡§ðŸ‡­",bi:"ðŸ‡§ðŸ‡®",bj:"ðŸ‡§ðŸ‡¯",bl:"ðŸ‡§ðŸ‡±",bm:"ðŸ‡§ðŸ‡²",bn:"ðŸ‡§ðŸ‡³",bo:"ðŸ‡§ðŸ‡´",bq:"ðŸ‡§ðŸ‡¶",br:"ðŸ‡§ðŸ‡·",bs:"ðŸ‡§ðŸ‡¸",bt:"ðŸ‡§ðŸ‡¹",bv:"ðŸ‡§ðŸ‡»",bw:"ðŸ‡§ðŸ‡¼",by:"ðŸ‡§ðŸ‡¾",bz:"ðŸ‡§ðŸ‡¿",ca:"ðŸ‡¨ðŸ‡¦",cc:"ðŸ‡¨ðŸ‡¨",cd:"ðŸ‡¨ðŸ‡©",cf:"ðŸ‡¨ðŸ‡«",cg:"ðŸ‡¨ðŸ‡¬",ch:"ðŸ‡¨ðŸ‡­",ci:"ðŸ‡¨ðŸ‡®",ck:"ðŸ‡¨ðŸ‡°",cl:"ðŸ‡¨ðŸ‡±",cm:"ðŸ‡¨ðŸ‡²",cn:"ðŸ‡¨ðŸ‡³",co:"ðŸ‡¨ðŸ‡´",cp:"ðŸ‡¨ðŸ‡µ",cr:"ðŸ‡¨ðŸ‡·",cu:"ðŸ‡¨ðŸ‡º",cv:"ðŸ‡¨ðŸ‡»",cw:"ðŸ‡¨ðŸ‡¼",cx:"ðŸ‡¨ðŸ‡½",cy:"ðŸ‡¨ðŸ‡¾",cz:"ðŸ‡¨ðŸ‡¿",de:"ðŸ‡©ðŸ‡ª",dg:"ðŸ‡©ðŸ‡¬",dj:"ðŸ‡©ðŸ‡¯",dk:"ðŸ‡©ðŸ‡°",dm:"ðŸ‡©ðŸ‡²",do:"ðŸ‡©ðŸ‡´",dz:"ðŸ‡©ðŸ‡¿",ea:"ðŸ‡ªðŸ‡¦",ec:"ðŸ‡ªðŸ‡¨",ee:"ðŸ‡ªðŸ‡ª",eg:"ðŸ‡ªðŸ‡¬",eh:"ðŸ‡ªðŸ‡­",er:"ðŸ‡ªðŸ‡·",es:"ðŸ‡ªðŸ‡¸",et:"ðŸ‡ªðŸ‡¹",eu:"ðŸ‡ªðŸ‡º",fi:"ðŸ‡«ðŸ‡®",fj:"ðŸ‡«ðŸ‡¯",fk:"ðŸ‡«ðŸ‡°",fm:"ðŸ‡«ðŸ‡²",fo:"ðŸ‡«ðŸ‡´",fr:"ðŸ‡«ðŸ‡·",ga:"ðŸ‡¬ðŸ‡¦",gb:"ðŸ‡¬ðŸ‡§",gd:"ðŸ‡¬ðŸ‡©",ge:"ðŸ‡¬ðŸ‡ª",gf:"ðŸ‡¬ðŸ‡«",gg:"ðŸ‡¬ðŸ‡¬",gh:"ðŸ‡¬ðŸ‡­",gi:"ðŸ‡¬ðŸ‡®",gl:"ðŸ‡¬ðŸ‡±",gm:"ðŸ‡¬ðŸ‡²",gn:"ðŸ‡¬ðŸ‡³",gp:"ðŸ‡¬ðŸ‡µ",gq:"ðŸ‡¬ðŸ‡¶",gr:"ðŸ‡¬ðŸ‡·",gs:"ðŸ‡¬ðŸ‡¸",gt:"ðŸ‡¬ðŸ‡¹",gu:"ðŸ‡¬ðŸ‡º",gw:"ðŸ‡¬ðŸ‡¼",gy:"ðŸ‡¬ðŸ‡¾",hk:"ðŸ‡­ðŸ‡°",hm:"ðŸ‡­ðŸ‡²",hn:"ðŸ‡­ðŸ‡³",hr:"ðŸ‡­ðŸ‡·",ht:"ðŸ‡­ðŸ‡¹",hu:"ðŸ‡­ðŸ‡º",ic:"ðŸ‡®ðŸ‡¨",id:"ðŸ‡®ðŸ‡©",ie:"ðŸ‡®ðŸ‡ª",il:"ðŸ‡®ðŸ‡±",im:"ðŸ‡®ðŸ‡²",in:"ðŸ‡®ðŸ‡³",io:"ðŸ‡®ðŸ‡´",iq:"ðŸ‡®ðŸ‡¶",ir:"ðŸ‡®ðŸ‡·",is:"ðŸ‡®ðŸ‡¸",it:"ðŸ‡®ðŸ‡¹",je:"ðŸ‡¯ðŸ‡ª",jm:"ðŸ‡¯ðŸ‡²",jo:"ðŸ‡¯ðŸ‡´",jp:"ðŸ‡¯ðŸ‡µ",ke:"ðŸ‡°ðŸ‡ª",kg:"ðŸ‡°ðŸ‡¬",kh:"ðŸ‡°ðŸ‡­",ki:"ðŸ‡°ðŸ‡®",km:"ðŸ‡°ðŸ‡²",kn:"ðŸ‡°ðŸ‡³",kp:"ðŸ‡°ðŸ‡µ",kr:"ðŸ‡°ðŸ‡·",kw:"ðŸ‡°ðŸ‡¼",ky:"ðŸ‡°ðŸ‡¾",kz:"ðŸ‡°ðŸ‡¿",la:"ðŸ‡±ðŸ‡¦",lb:"ðŸ‡±ðŸ‡§",lc:"ðŸ‡±ðŸ‡¨",li:"ðŸ‡±ðŸ‡®",lk:"ðŸ‡±ðŸ‡°",lr:"ðŸ‡±ðŸ‡·",ls:"ðŸ‡±ðŸ‡¸",lt:"ðŸ‡±ðŸ‡¹",lu:"ðŸ‡±ðŸ‡º",lv:"ðŸ‡±ðŸ‡»",ly:"ðŸ‡±ðŸ‡¾",ma:"ðŸ‡²ðŸ‡¦",mc:"ðŸ‡²ðŸ‡¨",md:"ðŸ‡²ðŸ‡©",me:"ðŸ‡²ðŸ‡ª",mf:"ðŸ‡²ðŸ‡«",mg:"ðŸ‡²ðŸ‡¬",mh:"ðŸ‡²ðŸ‡­",mk:"ðŸ‡²ðŸ‡°",ml:"ðŸ‡²ðŸ‡±",mm:"ðŸ‡²ðŸ‡²",mn:"ðŸ‡²ðŸ‡³",mo:"ðŸ‡²ðŸ‡´",mp:"ðŸ‡²ðŸ‡µ",mq:"ðŸ‡²ðŸ‡¶",mr:"ðŸ‡²ðŸ‡·",ms:"ðŸ‡²ðŸ‡¸",mt:"ðŸ‡²ðŸ‡¹",mu:"ðŸ‡²ðŸ‡º",mv:"ðŸ‡²ðŸ‡»",mw:"ðŸ‡²ðŸ‡¼",mx:"ðŸ‡²ðŸ‡½",my:"ðŸ‡²ðŸ‡¾",mz:"ðŸ‡²ðŸ‡¿",na:"ðŸ‡³ðŸ‡¦",nc:"ðŸ‡³ðŸ‡¨",ne:"ðŸ‡³ðŸ‡ª",nf:"ðŸ‡³ðŸ‡«",ng:"ðŸ‡³ðŸ‡¬",ni:"ðŸ‡³ðŸ‡®",nl:"ðŸ‡³ðŸ‡±",no:"ðŸ‡³ðŸ‡´",np:"ðŸ‡³ðŸ‡µ",nr:"ðŸ‡³ðŸ‡·",nu:"ðŸ‡³ðŸ‡º",nz:"ðŸ‡³ðŸ‡¿",om:"ðŸ‡´ðŸ‡²",pa:"ðŸ‡µðŸ‡¦",pe:"ðŸ‡µðŸ‡ª",pf:"ðŸ‡µðŸ‡«",pg:"ðŸ‡µðŸ‡¬",ph:"ðŸ‡µðŸ‡­",pk:"ðŸ‡µðŸ‡°",pl:"ðŸ‡µðŸ‡±",pm:"ðŸ‡µðŸ‡²",pn:"ðŸ‡µðŸ‡³",pr:"ðŸ‡µðŸ‡·",ps:"ðŸ‡µðŸ‡¸",pt:"ðŸ‡µðŸ‡¹",pw:"ðŸ‡µðŸ‡¼",py:"ðŸ‡µðŸ‡¾",qa:"ðŸ‡¶ðŸ‡¦",re:"ðŸ‡·ðŸ‡ª",ro:"ðŸ‡·ðŸ‡´",rs:"ðŸ‡·ðŸ‡¸",ru:"ðŸ‡·ðŸ‡º",rw:"ðŸ‡·ðŸ‡¼",sa:"ðŸ‡¸ðŸ‡¦",sb:"ðŸ‡¸ðŸ‡§",sc:"ðŸ‡¸ðŸ‡¨",sd:"ðŸ‡¸ðŸ‡©",se:"ðŸ‡¸ðŸ‡ª",sg:"ðŸ‡¸ðŸ‡¬",sh:"ðŸ‡¸ðŸ‡­",si:"ðŸ‡¸ðŸ‡®",sj:"ðŸ‡¸ðŸ‡¯",sk:"ðŸ‡¸ðŸ‡°",sl:"ðŸ‡¸ðŸ‡±",sm:"ðŸ‡¸ðŸ‡²",sn:"ðŸ‡¸ðŸ‡³",so:"ðŸ‡¸ðŸ‡´",sr:"ðŸ‡¸ðŸ‡·",ss:"ðŸ‡¸ðŸ‡¸",st:"ðŸ‡¸ðŸ‡¹",sv:"ðŸ‡¸ðŸ‡»",sx:"ðŸ‡¸ðŸ‡½",sy:"ðŸ‡¸ðŸ‡¾",sz:"ðŸ‡¸ðŸ‡¿",ta:"ðŸ‡¹ðŸ‡¦",tc:"ðŸ‡¹ðŸ‡¨",td:"ðŸ‡¹ðŸ‡©",tf:"ðŸ‡¹ðŸ‡«",tg:"ðŸ‡¹ðŸ‡¬",th:"ðŸ‡¹ðŸ‡­",tj:"ðŸ‡¹ðŸ‡¯",tk:"ðŸ‡¹ðŸ‡°",tl:"ðŸ‡¹ðŸ‡±",tm:"ðŸ‡¹ðŸ‡²",tn:"ðŸ‡¹ðŸ‡³",to:"ðŸ‡¹ðŸ‡´",tr:"ðŸ‡¹ðŸ‡·",tt:"ðŸ‡¹ðŸ‡¹",tv:"ðŸ‡¹ðŸ‡»",tw:"ðŸ‡¹ðŸ‡¼",tz:"ðŸ‡¹ðŸ‡¿",ua:"ðŸ‡ºðŸ‡¦",ug:"ðŸ‡ºðŸ‡¬",um:"ðŸ‡ºðŸ‡²",un:"ðŸ‡ºðŸ‡³",us:"ðŸ‡ºðŸ‡¸",uy:"ðŸ‡ºðŸ‡¾",uz:"ðŸ‡ºðŸ‡¿",va:"ðŸ‡»ðŸ‡¦",vc:"ðŸ‡»ðŸ‡¨",ve:"ðŸ‡»ðŸ‡ª",vg:"ðŸ‡»ðŸ‡¬",vi:"ðŸ‡»ðŸ‡®",vn:"ðŸ‡»ðŸ‡³",vu:"ðŸ‡»ðŸ‡º",wf:"ðŸ‡¼ðŸ‡«",ws:"ðŸ‡¼ðŸ‡¸",xk:"ðŸ‡½ðŸ‡°",ye:"ðŸ‡¾ðŸ‡ª",yt:"ðŸ‡¾ðŸ‡¹",za:"ðŸ‡¿ðŸ‡¦",zm:"ðŸ‡¿ðŸ‡²",zw:"ðŸ‡¿ðŸ‡¼"};class Ee extends r.Component{constructor(e){super(e),this.state={items:{},expanded:[],searchQuery:"",searchResults:[]},this.searchCallback=this.searchCallback.bind(this)}init(){this.setState({items:{},expanded:[],searchQuery:"",searchResults:[]},()=>{this.loadItems([0]).then(()=>{this.state.items[0].childs.length>0?this.expand(0):this.callCallback()})})}componentDidMount(){this.init()}componentDidUpdate(e){this.props.dimKey!=e.dimKey&&this.init()}async loadItems(e){let t,n;const r={method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/JSON"}};if(t=await fetch(API_URL+"/api/dims/"+this.props.dimKey+"/itemsMany",r),!t.ok)throw new Error("Error loading dims");return n=await t.json(),function(e,t){return new Promise((n,r)=>{e.setState(t,n)})}(this,t=>{const r={...t.items};return e.map((e,t)=>r[e]=n[t]),{items:r}})}expand(e){const t=this.state.items[e].childs,n=()=>this.setState(t=>({expanded:[...t.expanded,e]}),()=>this.callCallback());t.length>0&&!(t[0]in this.state.items)?this.loadItems(t).then(n):n()}collapse(e){this.setState(t=>({expanded:[...t.expanded].filter(t=>t!=e)}),()=>this.callCallback())}callCallback(){if(!this.props.expandCallback)return;let e;""==this.state.searchQuery?(e=[],this.callCallbackCheck(e,0)):e=this.state.searchResults,this.props.expandCallback(e)}callCallbackCheck(e,t){const n=this.state.items[t];e.push({id:t,key:n?n.key:"",nameShort:n?n.nameShort:{},nameLong:n?n.nameLong:{}});-1!=this.state.expanded.indexOf(t)&&this.state.items[t].childs.map(t=>this.callCallbackCheck(e,t))}renderItemName(e){let t=fe(e);if("geo"==this.props.dimKey||this.props.dimKey.startsWith("geo-")||this.props.dimKey.endsWith("-geo")||-1!=this.props.dimKey.indexOf("-geo-"))if("total"==e.key)t="ðŸŒ "+t;else if(2==e.key.length){const r=(n=e.key,we[n]);r&&(t=r+" "+t)}var n;return t}renderItem(e,t){const n=e in this.state.items,r=-1!=this.state.expanded.indexOf(e),o=n?this.state.items[e].childs.length:0,s={};s.cursor=o>0||this.props.onChange?"pointer":"default",e==this.props.itemId&&(s.borderColor="#ccc");const a={paddingLeft:(.5*t).toString()+"rem"},c=i.a.createElement("div",{key:e,className:"dim-item",style:a},i.a.createElement("div",{className:"dim-item-container "+(this.props.onChange?"selectable":"")},i.a.createElement("div",{style:{width:"1rem"}},o>0&&i.a.createElement("a",{href:"#",onClick:t=>{t.preventDefault(),r?this.collapse(e):this.expand(e)}},r?"-":"+")),n&&i.a.createElement("div",{onClick:t=>{t.preventDefault(),this.props.onChange?this.props.onChange(this.state.items[e]):r?this.collapse(e):this.expand(e)},className:"dim-item-name",style:s,title:ye(this.state.items[e])},this.renderItemName(this.state.items[e]))));if(r){return[c,...this.state.items[e].childs.map(e=>this.renderItem(e,t+1))]}return[c]}renderItemSearch(e,t){if(!e)return i.a.createElement("div",{key:t},"Â ");const n={};return n.cursor=this.props.onChange?"pointer":"default",e.id==this.props.itemId&&(n.borderColor="#ccc"),i.a.createElement("div",{key:e.key,className:"dim-item"},i.a.createElement("div",{className:"dim-item-container "+(this.props.onChange?"selectable":"")},i.a.createElement("div",{onClick:t=>{t.preventDefault(),this.props.onChange&&this.props.onChange(e)},className:"dim-item-name",style:n},this.renderItemName(e))))}searchCallback(e,t){this.setState({searchQuery:e,searchResults:t},()=>this.callCallback())}render(){if(!this.state.items)return"loading ...";let e=null;return"start"!=this.props.searchPosition&&"end"!=this.props.searchPosition||(e=i.a.createElement("div",{className:"dim-item"},i.a.createElement(be,{size:"sm",dimKey:this.props.dimKey,hideResults:!0,hideIcon:!0,callback:this.searchCallback,multipleQueries:this.props.searchMultiple}))),""==this.state.searchQuery?i.a.createElement("div",{className:this.props.horizontal?"dim-horizontal":""},"start"==this.props.searchPosition&&e,this.renderItem(0,0),"end"==this.props.searchPosition&&e):i.a.createElement("div",{className:this.props.horizontal?"dim-horizontal":""},"start"==this.props.searchPosition&&e,this.state.searchResults.map((e,t)=>this.renderItemSearch(e,t)),"end"==this.props.searchPosition&&e)}}class xe extends r.Component{constructor(e){super(e),this.state={data:null}}async componentDidMount(){const e=await fetch(API_URL+"/api/dims/"+this.props.match.params.dimKey),t=await e.json();this.setState({data:t})}render(){return this.state.data?i.a.createElement("div",{className:"container"},i.a.createElement("p",null,i.a.createElement(ie,{to:"/"},"Home")),i.a.createElement("p",{className:"h6"},"Dimension"),i.a.createElement("h1",null,de(this.state.data.name)),i.a.createElement("p",null,this.state.data.description),i.a.createElement(Ee,{dimKey:this.state.data.key,searchPosition:"start"})):i.a.createElement("p",null,"Loading ...")}}n(18);class Se extends r.Component{constructor(e){super(e),this.state={shown:!1,itemsPreloaded:{}},this.handleClickOutside=this.handleClickOutside.bind(this),this.escFunction=this.escFunction.bind(this),this.setWrapperRef=this.setWrapperRef.bind(this),this.wrapperRef=null}componentWillUnmount(){document.removeEventListener("mousedown",this.handleClickOutside),this.wrapperRef&&this.wrapperRef.removeEventListener("keydown",this.escFunction,!1)}componentDidMount(){document.addEventListener("mousedown",this.handleClickOutside),this.loadSelected()}async loadSelected(){const e=this.props.itemId;if(e in this.state.itemsPreloaded)return;this.setState(t=>({itemsPreloaded:{...t.itemsPreloaded,[e]:null}}));const t=await fetch(API_URL+"/api/dims/"+this.props.dimKey+"/items/"+e),n=await t.json();this.setState(e=>({itemsPreloaded:{...e.itemsPreloaded,[n.id]:n}}))}componentDidUpdate(e){if(this.props.dimKey!=e.dimKey)return this.setState({itemsPreloaded:{}}),void this.loadSelected();this.props.itemId==e.itemId||this.loadSelected()}toggle(){this.setState(e=>({shown:!e.shown}))}setWrapperRef(e){this.wrapperRef&&this.wrapperRef.removeEventListener("keydown",this.escFunction,!1),e&&e.addEventListener("keydown",this.escFunction,!1),this.wrapperRef=e}handleClickOutside(e){this.wrapperRef&&!this.wrapperRef.contains(e.target)&&this.state.shown&&this.setState({shown:!1})}escFunction(e){27===e.keyCode&&this.state.shown&&(e.preventDefault(),e.stopPropagation(),this.setState({shown:!1}))}change(e){this.setState(t=>({itemsPreloaded:{...t.itemsPreloaded,[e.id]:e},shown:!1})),this.props.onChange(e)}render(){let e="<loading ...>";return this.props.itemId in this.state.itemsPreloaded&&this.state.itemsPreloaded[this.props.itemId]&&(e=fe(this.state.itemsPreloaded[this.props.itemId])),i.a.createElement("div",{className:"dropdown",tabIndex:"0",ref:this.setWrapperRef},i.a.createElement("button",{className:"form-control",onClick:e=>{e.preventDefault(),this.toggle()}},i.a.createElement("span",{className:"d-flex"},i.a.createElement("span",{className:"flex-fill text-left text-truncate"},e),i.a.createElement("span",null,"â–¼"))),this.state.shown&&i.a.createElement("div",{className:"dropdown-menu",style:{maxHeight:"25rem",minWidth:"15rem",maxWidth:"100%",overflowY:"auto",display:"block",padding:"0.3rem",marginTop:"-1px"}},i.a.createElement(Ee,{dimKey:this.props.dimKey,itemId:this.props.itemId,onChange:e=>this.change(e),searchPosition:"start"})))}}const Ce=[["km","miles",.62137119224]];class ke extends r.Component{constructor(e){super(e),this.state={meta:null,dimX:!1,dimY:!1,dimItems:[],dimItemsX:[],dimItemsY:[],values:{},mouseOverX:!1,mouseOverY:!1,selecting:!1,selectionStartX:!1,selectionStartY:!1,selectionEndX:!1,selectionEndY:!1},this.handleCopy=this.handleCopy.bind(this),this.dimItemsChangedX=this.dimItemsChangedX.bind(this),this.dimItemsChangedY=this.dimItemsChangedY.bind(this)}static getDerivedStateFromProps(e,t){return t.meta&&e.cubeKey==t.meta.key?null:{meta:null}}componentDidUpdate(e){this.props.cubeKey!=e.cubeKey&&this.loadMeta()}componentDidMount(){this.loadMeta(),document.addEventListener("copy",this.handleCopy)}componentWillUnmount(){document.removeEventListener("copy",this.handleCopy)}async loadMeta(){let e,t;this.setState({meta:null,dimX:!1,dimY:!1,dimItems:[],dimItemsX:[],dimItemsY:[],values:{},mouseOverX:!1,mouseOverY:!1,selecting:!1,selectionStartX:!1,selectionStartY:!1,selectionEndX:!1,selectionEndY:!1}),e=await fetch(API_URL+"/api/cubes/"+this.props.cubeKey),t=await e.json();const n={meta:t};t.dims.length>=2?(n.dimY=1,n.dimX=0):1==t.dims.length?(n.dimY=0,n.dimX=!1):(n.dimY=!1,n.dimX=!1),n.dimItems=[];for(let e=0;e<t.dims.length;++e)n.dimItems.push(0);this.setState(n)}setDimItm(e,t){this.resetSelection(),this.setState(n=>{const r=[...n.dimItems];return r[e]=t.id,{dimItems:r}},()=>{this.checkForData().then(()=>{this.props.onViewChange&&this.props.onViewChange(this.currentView())})})}dimItemsChangedX(e){this.resetSelection(),this.setState({dimItemsX:e},()=>{this.checkForData().then(()=>{this.props.onViewChange&&this.props.onViewChange(this.currentView())})})}dimItemsChangedY(e){this.resetSelection(),this.setState({dimItemsY:e},()=>{this.checkForData().then(()=>{this.props.onViewChange&&this.props.onViewChange(this.currentView())})})}renderResult(e,t){const n=[...this.state.dimItems];!1!==this.state.dimX&&(n[this.state.dimX]=e),n[this.state.dimY]=t;let r=this.state.values[this.makeIndex(n)];if(void 0===r)return"";he()||(r=function(e,t){for(const n of Ce)if(n[0]==t)return e*n[2];return e}(r,this.state.meta.unit));const i=this.state.meta.integers?0:2;return r.toLocaleString(pe(),{minimumFractionDigits:i,maximumFractionDigits:i})}makeIndex(e){return e.join("/")}async checkForData(){const e=[],t=[];for(const n of this.state.dimItemsY)if(n)if(!1!==this.state.dimX)for(const r of this.state.dimItemsX){if(!r)continue;const i=[...this.state.dimItems];i[this.state.dimX]=r.id,i[this.state.dimY]=n.id;const o=this.makeIndex(i);void 0===this.state.values[o]&&(e.push(i),t.push(o))}else{const r=[...this.state.dimItems];r[this.state.dimY]=n.id;const i=this.makeIndex(r);void 0===this.state.values[i]&&(e.push(r),t.push(i))}if(0==e.length)return;let n,r;n=await fetch(API_URL+"/api/cubes/"+this.state.meta.key+"/cellValuesById",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await n.json(),this.setState(e=>{const n={...e.values};for(let e=0;e<t.length;++e)n[t[e]]=r[e];return{values:n}})}renderDimSelection(e,t){return t===this.state.dimX?i.a.createElement("p",null,"X"):t===this.state.dimY?i.a.createElement("p",null,"Y"):i.a.createElement(Se,{dimKey:e.key,itemId:this.state.dimItems[t],onChange:e=>this.setDimItm(t,e)})}selectX(e){this.setState(t=>t.dimX===e?null:t.dimY==e?{dimX:e,dimY:t.dimX,dimItemsX:[],dimItemsY:[]}:{dimX:e,dimItemsX:[]})}selectY(e){this.setState(t=>t.dimY===e?null:t.dimX==e?{dimY:e,dimX:t.dimY,dimItemsX:[],dimItemsY:[]}:{dimY:e,dimItemsY:[]})}mouseEnter(e,t){this.setState({mouseOverX:e,mouseOverY:t})}mouseLeave(e,t){this.setState(n=>n.mouseOverX!=e||n.mouseOverY!=t?null:{mouseOverX:!1,mouseOverY:!1})}mouseDown(e,t){this.setState({selecting:!0,selectionStartX:e,selectionStartY:t,selectionEndX:e,selectionEndY:t})}mouseUp(e,t){this.setState(n=>{if(!n.selecting)return null;if(n.selectionStartX==e&&n.selectionStartY==t)return{selecting:!1,selectionStartX:e,selectionStartY:t,selectionEndX:e,selectionEndY:t};let r=n.selectionStartX,i=n.selectionStartY,o=e,s=t;if(r>o){const e=r;r=o,o=e}if(i>s){const e=i;i=s,s=e}return{selecting:!1,selectionStartX:r,selectionStartY:i,selectionEndX:o,selectionEndY:s}},()=>{if(this.props.onSelect){const e=this.currentSelection();this.props.onSelect(e)}})}mouseMove(e,t){this.setState(n=>n.selecting?{selectionEndX:e,selectionEndY:t}:null)}currentView(e=0,t=0,n=-1,r=-1){-1==n&&(n=this.state.dimItemsX.length-1),-1==r&&(r=this.state.dimItemsY.length-1);const i=[];for(let o=t;o<=r;++o){const t=[];for(let r=e;r<=n;++r){const e=[...this.state.dimItems];!1!==this.state.dimX&&(e[this.state.dimX]=this.state.dimItemsX[r].id),e[this.state.dimY]=this.state.dimItemsY[o].id;const n=this.state.values[this.makeIndex(e)];t.push(n)}i.push(t)}return{data:i,dimItems:this.state.dimItems,dimX:this.state.dimX,dimY:this.state.dimY,dimItemsX:this.state.dimItemsX.slice(e,n+1),dimItemsY:this.state.dimItemsY.slice(t,r+1)}}currentSelection(){return!1===this.state.selectionStartX?null:this.currentView(this.state.selectionStartX,this.state.selectionStartY,this.state.selectionEndX,this.state.selectionEndY)}handleCopy(e){if(!1!==this.state.selectionStartX&&e.target&&e.target.closest(".cube-cell")){e.preventDefault();const t=navigator.platform.indexOf("Win")>-1?"\r\n":"\n",n=this.currentSelection().data.map(e=>e.map(e=>null==e?"":e.toLocaleString("fullwide",{useGrouping:!1,minimumFractionDigits:this.state.meta.integers?0:2})).join("\t")).join(t);e.clipboardData.setData("text/plain",n)}}resetSelection(){const e=!1!==this.state.selectionStartX;this.setState({selectionStartX:!1,selectionStartY:!1,selectionEndX:!1,selectionEndY:!1},()=>{e&&this.props.onSelect&&this.props.onSelect(null)})}renderCell(e,t,n,r){const o={};if(!1!==this.state.selectionStartX){let e,t;this.state.selectionStartX<=this.state.selectionEndX&&n>=this.state.selectionStartX&&n<=this.state.selectionEndX&&(e=!0),this.state.selectionStartX>this.state.selectionEndX&&n<=this.state.selectionStartX&&n>=this.state.selectionEndX&&(e=!0),this.state.selectionStartY<=this.state.selectionEndY&&r>=this.state.selectionStartY&&r<=this.state.selectionEndY&&(t=!0),this.state.selectionStartY>this.state.selectionEndY&&r<=this.state.selectionStartY&&r>=this.state.selectionEndY&&(t=!0),e&&t&&(o.backgroundColor="rgba(0,0,0,0.15)")}else this.state.mouseOverX!==n&&this.state.mouseOverY!==r||(o.backgroundColor="rgba(0,0,0,0.08)");return i.a.createElement("td",{key:e?e.id:0,onMouseDown:()=>this.mouseDown(n,r),onMouseUp:()=>this.mouseUp(n,r),onMouseMove:()=>this.mouseMove(n,r),onMouseEnter:()=>this.mouseEnter(n,r),onMouseLeave:()=>this.mouseLeave(n,r),style:o},this.renderResult(e?e.id:0,t.id))}render(){return this.state.meta?i.a.createElement("div",{className:"cube"},i.a.createElement("div",{className:"cube-dims"},this.state.meta.dims.map((e,t)=>i.a.createElement("div",{key:t},i.a.createElement("div",null,i.a.createElement("strong",null,de(e.name)),!1!==this.state.dimX&&i.a.createElement(i.a.Fragment,null,i.a.createElement("a",{href:"#",onClick:e=>{e.preventDefault(),this.selectX(t)},className:"ml-2"},"X"),i.a.createElement("a",{href:"#",onClick:e=>{e.preventDefault(),this.selectY(t)},className:"ml-2"},"Y"))),this.renderDimSelection(e,t)))),i.a.createElement("table",null,i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",{style:{minWidth:"5rem"}}),i.a.createElement("td",null,!1!==this.state.dimX&&i.a.createElement(Ee,{dimKey:this.state.meta.dims[this.state.dimX].key,horizontal:!0,expandCallback:this.dimItemsChangedX,searchPosition:"end",searchMultiple:!0}))),i.a.createElement("tr",null,i.a.createElement("td",null,!1!==this.state.dimY&&i.a.createElement(Ee,{dimKey:this.state.meta.dims[this.state.dimY].key,expandCallback:this.dimItemsChangedY,searchPosition:"end",searchMultiple:!0})),i.a.createElement("td",null,i.a.createElement("table",{className:"cube-cell"},i.a.createElement("tbody",null,this.state.dimItemsY.map((e,t)=>i.a.createElement("tr",{key:e?e.id:t},!1!==this.state.dimX&&this.state.dimItemsX.map((n,r)=>n&&e?this.renderCell(n,e,r,t):i.a.createElement("td",{key:r})),!1===this.state.dimX&&this.renderCell(null,e,0,t)))))))))):"loading ..."}}function Ie(e){return new Promise((function(t,n){const r=function(e){const t=document.createElement("a");return t.href=e,t.href}(e),i=Array.from(document.querySelectorAll("script")).find(e=>e.src==r);if(i)i.hasLoaded?t():void 0!==i.callbacks?i.callbacks.push(t):t();else{let n=document.createElement("script");n.src=e,n.hasLoaded=!1,n.callbacks=[t],n.onload=function(){this.hasLoaded=!0;for(const e of this.callbacks)e()},document.getElementsByTagName("body").length>0?document.getElementsByTagName("body")[0].appendChild(n):document.getElementsByTagName("head")[0].appendChild(n)}}))}class Oe extends r.Component{constructor(e){super(e),this.state={open:!1}}render(){return i.a.createElement("div",{style:{position:"relative"}},i.a.createElement("button",{className:"btn btn-outline-secondary",onClick:()=>this.setState(e=>({open:!e.open}))},"âš™ï¸"),this.state.open&&i.a.createElement("div",{style:{position:"absolute",top:"2.5rem",right:0,padding:"0.5rem",width:"7rem",backgroundColor:"#fff",border:"1px solid #999"}},"Language:",i.a.createElement("br",null),i.a.createElement("select",{value:pe(),onChange:e=>{return t=e.target.value,localStorage.setItem("lang",t),oe=t,void ae();var t}},i.a.createElement("option",{value:"en"},"EN"),i.a.createElement("option",{value:"de"},"DE"),i.a.createElement("option",{value:"fr"},"FR"),i.a.createElement("option",{value:"sl"},"SL")),i.a.createElement("br",null),"Units:",i.a.createElement("br",null),i.a.createElement("select",{value:he()?"int":"us",onChange:e=>{return t="int"==e.target.value,se=t,t?localStorage.setItem("intUnits","1"):localStorage.setItem("intUnits","0"),void ae();var t}},i.a.createElement("option",{value:"int"},"International"),i.a.createElement("option",{value:"us"},"US"))))}}const Re={elements:{line:{tension:.13}},scales:{yAxes:[{display:!0,ticks:{suggestedMin:0}}]}};class je extends r.Component{constructor(e){super(e),this.state={data:null,error:null,chartData:!1,valueFull:{},selection:null}}async componentDidMount(){try{const e=await fetch(API_URL+"/api/cubes/"+this.props.match.params.cubeKey);if(404==e.status)return void this.setState({error:"Cube not found"});if(!e.ok)return void this.setState({error:"Unknown error"});const t=await e.json();this.setState({data:t})}catch(e){this.setState({error:new String(e)})}}selectionChanged(e){if(this.setState({selection:e,chartData:null}),e)if(e.dimItemsX.length>1||e.dimItemsY.length>1){const t={labels:e.dimItemsX.map(e=>fe(e)),datasets:e.dimItemsY.map((t,n)=>({label:fe(t),data:e.data[n]}))};let n=Promise.resolve();window.ReactChartjs2||(n=n.then(()=>Ie("https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js")).then(()=>Ie("https://cdnjs.cloudflare.com/ajax/libs/react-chartjs-2/2.7.6/react-chartjs-2.min.js"))),n.then(()=>this.setState({chartData:t}))}else{const t=[...e.dimItems];!1!==e.dimX&&(t[e.dimX]=e.dimItemsX[0].id),t[e.dimY]=e.dimItemsY[0].id;const n=t.join("/");if(void 0===this.state.valueFull[n]){this.setState(e=>({valueFull:{...e.valueFull,[n]:null}}));const e=t.map(e=>e.toLocaleString("fullwide",{useGrouping:!1})).join("/");fetch(API_URL+"/api/cubes/"+this.state.data.key+"/cellById/"+e).then(e=>e.json()).then(e=>this.setState(t=>({valueFull:{...t.valueFull,[n]:e}})))}}}renderCellInfo(){if(!this.state.selection||this.state.selection.dimItemsX.length>1||this.state.selection.dimItemsY.length>1)return;const e=[...this.state.selection.dimItems];!1!==this.state.selection.dimX&&(e[this.state.selection.dimX]=this.state.selection.dimItemsX[0].id),e[this.state.selection.dimY]=this.state.selection.dimItemsY[0].id;const t=e.join("/"),n=this.state.valueFull[t];return n?i.a.createElement("div",null,"value: ",n.value.toLocaleString()," ",i.a.createElement("br",null),"desc: ",n.desc," ",i.a.createElement("br",null),"formula: ",n.formula):i.a.createElement("p",null,"Loading cell info ...")}render(){if(!this.state.data&&!this.state.error)return i.a.createElement("p",null,"Loading ...");if(this.state.error)return i.a.createElement("div",null,this.state.error);let e=null;return this.state.chartData&&(e=window.ReactChartjs2?i.a.createElement(window.ReactChartjs2.Line,{data:this.state.chartData,options:Re}):i.a.createElement("p",null,"Loading chart ...")),i.a.createElement("div",{className:"container"},i.a.createElement("p",null,i.a.createElement(ie,{to:"/"},"Home")),i.a.createElement("div",{className:"d-flex"},i.a.createElement("p",{className:"h6 flex-fill"},"Cube"),i.a.createElement(Oe,null)),i.a.createElement("h1",null,de(this.state.data.name)),i.a.createElement("p",null,de(this.state.data.desc)),this.state.data.unit.length>0&&i.a.createElement("div",null,"Unit: ",he()?this.state.data.unit:function(e){for(const t of Ce)if(t[0]==e)return t[1];return e}(this.state.data.unit)),i.a.createElement(ke,{cubeKey:this.state.data.key,onSelect:e=>this.selectionChanged(e)}),this.state.chartData&&i.a.createElement("div",{style:{width:"40rem"}},i.a.createElement("button",{className:"btn btn-secondary",onClick:()=>this.setState({chartData:null})},"X"),e),this.renderCellInfo())}}class Ye extends r.Component{constructor(e){super(e)}componentDidMount(){me(this.forceUpdate.bind(this))}componentWillUnmount(){me(null)}render(){return i.a.createElement(U,null,i.a.createElement(B,null,i.a.createElement(G,{exact:!0,path:"/",component:ve}),i.a.createElement(G,{path:"/dims/:dimKey",component:xe}),i.a.createElement(G,{path:"/cubes/:cubeKey",component:je})))}}const Xe=document.querySelector("#app");s.a.render(i.a.createElement(Ye,null),Xe)}]);